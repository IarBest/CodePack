<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title data-i18n="app_title">üì¶ CodePack</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="container">
    <h1 data-i18n="app_title">üì¶ CodePack</h1>
    <p class="subtitle" data-i18n="subtitle">–£–ø–∞–∫—É–π—Ç–µ –∏–ª–∏ —Ä–∞—Å–ø–∞–∫—É–π—Ç–µ –≤–∞—à –∫–æ–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ò–ò</p>
	
	<div class="lang-selector-container">
      <div id="lang-selector" class="lang-selector">
        <span id="lang-selector-label" data-i18n="lang_selector_label">–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</span>
        <ul id="lang-list"></ul>
      </div>
      <img id="lang-flag" class="lang-flag" src="" alt="flag" style="display: none;">
    </div>
    
    <div class="tabs">
      <button class="tab-btn active" data-tab="merge" data-i18n="merge_tab">–°–±–æ—Ä–∫–∞</button>
      <button class="tab-btn" data-tab="split" data-i18n="split_tab">–†–∞–∑–±–æ—Ä–∫–∞</button>
    </div>

    <div id="merge-tab" class="tab-content active">
      <div class="merge-grid">
        <div class="merge-controls">
          <h3 data-i18n="select_files_header">1. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã</h3>
          <button id="selectFolderBtn" data-i18n="select_folder_btn">–í—ã–±—Ä–∞—Ç—å –ø–∞–ø–∫—É</button>
          <button id="selectFilesBtn" data-i18n="select_files_btn">–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã</button>
          <div id="drag-drop-zone" class="drag-drop-zone">
            <p data-i18n="drag_drop_area">–ò–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã –∏ –ø–∞–ø–∫–∏ —Å—é–¥–∞</p>
          </div>
	       <div class="quick-ignore-settings">
            <label><input type="checkbox" id="excludeNodeModules" checked> <span data-i18n="exclude_node_modules">–ò—Å–∫–ª—é—á–∞—Ç—å <code>node_modules</code></span></label>
            <label><input type="checkbox" id="excludeUserData" checked> <span data-i18n="exclude_user_data">–ò—Å–∫–ª—é—á–∞—Ç—å <code>user-data</code></span></label>
          </div>
          
          <h3 data-i18n="settings_header">2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
          <div class="settings">
            <div class="setting-item">
              <label for="validExtensions" data-i18n="extensions_label">–†–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤:</label>
              <textarea id="validExtensions" rows="1"></textarea>
              <button id="restoreExtensions" class="btn-restore-defaults" data-i18n-tooltip="restore_defaults_tooltip">üîÑ</button>
            </div>
            
            <div class="setting-item">
              <label for="ignorePatterns" data-i18n="ignore_patterns_label">–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∏ –ø–∞–ø–∫–∏:</label>
              <textarea id="ignorePatterns" rows="1"></textarea>
              <button id="restoreIgnores" class="btn-restore-defaults" data-i18n-tooltip="restore_defaults_tooltip">üîÑ</button>
            </div>

            <div class="setting-item">
              <label><input type="checkbox" id="useAbsolutePaths"> <span data-i18n="use_absolute_paths_label">–í–∫–ª—é—á–∞—Ç—å –≤ –æ—Ç—á—ë—Ç –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏</span></label>
            </div>
          </div>
        </div>

        <div class="merge-preview">
          <div class="preview-header">
            <h3><span data-i18n="files_for_merge_header">3. –§–∞–π–ª—ã –¥–ª—è —Å–±–æ—Ä–∫–∏</span> <span id="file-count">(0 —Ñ–∞–π–ª–æ–≤)</span></h3>
            <div class="tree-controls">
              <button id="expandAllBtn" class="btn-tree-action" data-i18n="expand_all_btn" data-i18n-tooltip="expand_all_tooltip">–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤—Å—ë</button>
              <button id="collapseAllBtn" class="btn-tree-action" data-i18n="collapse_all_btn" data-i18n-tooltip="collapse_all_tooltip">–°–≤–µ—Ä–Ω—É—Ç—å –≤—Å—ë</button>
              <button id="clearFileListBtn" class="btn-clear-list" data-i18n="clear_btn" data-i18n-tooltip="clear_list_tooltip">–û—á–∏—Å—Ç–∏—Ç—å</button>
            </div>
          </div>
          <div id="file-list-container" class="file-list-container">
            <p class="placeholder" data-i18n="files_placeholder">–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤...</p>
          </div>
		  <div id="sticky-separator" data-i18n="sticky_separator_text">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∏—Å–∫–ª—é—á–µ–Ω–Ω—ã–º —Ñ–∞–π–ª–∞–º ‚Üì</div>
          <div class="output-section">
            <h3 data-i18n="result_header">4. –†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
            <div class="setting-item" style="margin-top: 5px; margin-bottom: 10px;">
              <label><input type="checkbox" id="addTimestamp"> <span data-i18n="add_timestamp_label">–î–æ–±–∞–≤–ª—è—Ç—å –≤ –∏–º—è —Ñ–∞–π–ª–∞ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è</span></label>
            </div>
<div class="setting-item" style="margin-bottom: 10px;">
  <label for="filenameComment" data-i18n="filename_comment_label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞:</label>
  <input type="text" id="filenameComment" data-i18n-placeholder="filename_comment_placeholder">
</div>
            <div class="output-path-wrapper">
              <input type="text" id="outputPath" data-i18n-placeholder="output_path_placeholder">
              <button id="selectOutputPathBtn" data-i18n-tooltip="select_output_path_tooltip">...</button>
            </div>
            <div class="setting-item" style="margin-top: 15px; margin-bottom: 0;">
              <label><input type="checkbox" id="closeOnComplete"> <span data-i18n="close_on_complete_label">–ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É</span></label>
            </div>
            <button id="mergeBtn" class="primary-btn" data-i18n="merge_btn">–û–±—ä–µ–¥–∏–Ω–∏—Ç—å</button>
          </div>
        </div>
      </div>
    </div>

  <div id="split-tab" class="tab-content">
      <div class="split-grid">
        <div class="split-controls">
  <h3 data-i18n="split_input_header">1. –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª</h3>

  <div id="viewer-drop-zone" class="drag-drop-zone">
    <p data-i18n="viewer_drop_zone_text">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–π —Ñ–∞–π–ª —Å—é–¥–∞</p>
    <p style="margin-top: 5px;" data-i18n="viewer_drop_zone_or">- –∏–ª–∏ -</p>
    <button id="selectSplitFileBtn" data-i18n="select_split_file_btn">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª —Å –¥–∏—Å–∫–∞...</button>
  </div>

<div id="viewer-container" class="viewer-container" style="display: none;">
    <div id="viewer-header" class="viewer-header">
      <div id="viewer-file-path" class="viewer-file-path" data-i18n-placeholder="viewer_file_path_placeholder">
        –ò–º—è —Ñ–∞–π–ª–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...
      </div>
    </div>
    <div id="viewer-toolbar" class="viewer-toolbar">
      <div id="viewer-nav-buttons" class="viewer-nav-buttons">
         <button id="selectNewFileBtn" data-i18n-tooltip="select_split_file_btn">üìÇ</button>
         <button id="viewer-prev-btn" data-i18n-tooltip="viewer_prev_file_tooltip">‚ñ≤</button>
         <button id="viewer-next-btn" data-i18n-tooltip="viewer_next_file_tooltip">‚ñº</button>
      </div>
      <div id="viewer-actions" class="viewer-actions">
        <button id="viewer-toggle-mode-btn" data-i18n-tooltip="viewer_toggle_mode_tooltip">üìö</button>
        <button id="viewer-search-btn" data-i18n-tooltip="viewer_search_tooltip">üîç</button>
        <button id="viewer-fullscreen-btn" data-i18n-tooltip="viewer_fullscreen_tooltip">‚õ∂</button>
      </div>
    </div>
    <div id="viewer-content" class="viewer-content" tabindex="0"></div>
  </div>

  <div class="settings" style="margin-top: 20px;">
    <p data-i18n="delimiters_settings_label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π:</p>
    <div class="delimiters">
      <label><span data-i18n="delimiter_start_label">–ù–∞—á–∞–ª–æ:</span> <input type="text" id="startDelimiter" value="//======= FILE: "></label>
      <label><span data-i18n="delimiter_end_label">–ö–æ–Ω–µ—Ü:</span> <input type="text" id="endDelimiter" value=" ======="></label>
    </div>
  </div>
</div>

        <div class="split-preview">
          <div class="preview-header">
            <h3><span data-i18n="files_for_split_header">2. –§–∞–π–ª—ã –¥–ª—è —Ä–∞–∑–±–æ—Ä–∫–∏</span> <span id="split-file-count">(0 —Ñ–∞–π–ª–æ–≤)</span></h3>
            <div class="tree-controls">
                <button id="splitClearBtn" class="btn-clear-list" data-i18n="clear_btn">–û—á–∏—Å—Ç–∏—Ç—å</button>
            </div>
          </div>
          <div id="split-file-list-container" class="file-list-container">
            <p class="placeholder" data-i18n="split_files_placeholder">–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤...</p>
          </div>
          <button id="splitBtn" class="primary-btn" data-i18n="split_btn">–†–∞–∑–æ–±—Ä–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É...</button>
          <button id="rebuildBtn" class="primary-btn" data-i18n="rebuild_btn" style="margin-top:8px;">–ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –≤ —Ñ–∞–π–ª...</button>
        </div>
      </div>
    </div>

    <div class="ai-help">
      <button id="copyAITemplateBtn" data-i18n="copy_ai_template_btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω –¥–ª—è –ò–ò</button>
    </div>

  </div>

  <div id="loader" class="loader-overlay" style="display: none;">
    <div class="loader-spinner"></div>
    <p data-i18n="loader_text">–û–±—Ä–∞–±–æ—Ç–∫–∞...</p>
  </div>
  
  <div id="toast-container"></div>
  
  <script type="module" src="viewer.js"></script>
  <script defer src="script.js"></script>
</body>
</html>
